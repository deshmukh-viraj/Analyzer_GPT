import subprocess
import sys

def install(package):
    try:
        subprocess.check_call([sys.executable, "-m", "pip", "install", "--quiet", "--timeout=60", package])
    except subprocess.TimeoutExpired:
        print(f"Installation of {package} timed out.")
    except subprocess.CalledProcessError as e:
        print(f"Installation of {package} failed with error: {e}")

install('pandas')
install('matplotlib')

import pandas as pd
import matplotlib.pyplot as plt

# Load the CSV file into a pandas DataFrame
df = pd.read_csv('/workspace/Global_Mobile_Prices_2025_Extended.csv')

# Create a histogram of the 'Price' column
plt.figure(figsize=(10, 6))  # Adjust figure size for better readability
plt.hist(df['Price'], bins=30, color='skyblue', edgecolor='black')  # Adjust bins as needed

# Add labels and title to the plot
plt.xlabel('Price')
plt.ylabel('Frequency')
plt.title('Price Distribution of Mobile Phones')
plt.grid(axis='y', alpha=0.75)

# Save the plot as 'price_distribution.png'
plt.savefig('price_distribution.png')

print("Price distribution graph saved as price_distribution.png")
